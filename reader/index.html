<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="A modern, local markdown novel reader with bookmarks, reading progress, and customizable themes.">
  <title>Novel Reader</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Alegreya:wght@400;500;700&family=Atkinson+Hyperlegible:wght@400;700&family=Outfit:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div class="app-shell" id="appShell">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-accent-bar"></div>
      <div class="sidebar-top">
        <div>
          <h1>Novel Reader</h1>
        </div>
        <button class="icon-btn" id="closeSidebarBtn" type="button" aria-label="Close library">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>

      <label class="search-wrap" for="searchInput">
        <span>Search chapters</span>
        <input id="searchInput" type="search" placeholder="Search by title or path...">
      </label>

      <div class="source-filter" id="sourceFilter"></div>

      <ul class="chapter-list" id="chapterList"></ul>
    </aside>

    <main class="reader-panel" id="readerPanel">
      <div class="reading-progress-bar" id="readingProgressBar"></div>

      <header class="toolbar">
        <div class="toolbar-group">
          <button class="icon-btn" id="openSidebarBtn" type="button" aria-label="Open library">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="12" x2="21" y2="12" />
              <line x1="3" y1="6" x2="21" y2="6" />
              <line x1="3" y1="18" x2="21" y2="18" />
            </svg>
          </button>
          <button class="icon-btn" id="toggleSettingsBtn" type="button" aria-expanded="false"
            aria-controls="settingsPanel" aria-label="Toggle settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
            </svg>
          </button>
          <button class="icon-btn" id="prevBtn" type="button" aria-label="Previous chapter">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 18 9 12 15 6" />
            </svg>
          </button>
          <button class="icon-btn" id="nextBtn" type="button" aria-label="Next chapter">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6" />
            </svg>
          </button>
          <button class="icon-btn bookmark-btn" id="bookmarkBtn" type="button" aria-label="Toggle bookmark"
            aria-pressed="false">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" />
            </svg>
          </button>
        </div>

        <div class="toolbar-group settings-grid" id="settingsPanel">
          <label for="themeSelect">
            Theme
            <select id="themeSelect">
              <option value="system">System</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
              <option value="sepia">Sepia</option>
            </select>
          </label>

          <label for="fontSelect">
            Font
            <select id="fontSelect">
              <option value="serif">Serif</option>
              <option value="friendly">Friendly</option>
              <option value="classic">Classic</option>
            </select>
          </label>

          <label for="fontSizeRange">
            Font Size <span id="fontSizeValue"></span>
            <input id="fontSizeRange" type="range" min="14" max="32" step="1">
          </label>

          <label for="lineHeightRange">
            Line Height <span id="lineHeightValue"></span>
            <input id="lineHeightRange" type="range" min="1.35" max="2.2" step="0.05">
          </label>

          <label for="widthRange">
            Text Width <span id="widthValue"></span>
            <input id="widthRange" type="range" min="560" max="1080" step="20">
          </label>
        </div>
      </header>

      <section class="chapter-meta">
        <h2 id="chapterTitle">Select a chapter from the library</h2>
        <p id="chapterInfo">Use search and source filters to quickly find episodes.</p>
      </section>

      <article class="content" id="content">
        <div class="welcome-state">
          <div class="welcome-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </svg>
          </div>
          <p class="welcome-title">Pick any chapter to start reading</p>
          <p class="welcome-hint">Use <kbd>←</kbd> <kbd>→</kbd> to navigate · <kbd>Esc</kbd> to toggle library</p>
        </div>
      </article>

    </main>

    <button class="back-to-top" id="backToTopBtn" type="button" aria-label="Back to top">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 15 12 9 6 15" />
      </svg>
    </button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.7/dist/purify.min.js"></script>
  <script src="./app.js"></script>
</body>

</html>